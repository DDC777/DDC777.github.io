<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    JAVA+WindowBuilder+MySQLå®ç°é¥­åº—ç®¡ç†ç³»ç»Ÿ | ZileWang7çš„Blog
</title>
<link rel="shortcut icon" href="https://zilewang7.github.io/favicon.ico?v=1626656037139">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zilewang7.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://zilewang7.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://zilewang7.github.io">
                <img class="avatar" src="https://zilewang7.github.io/images/avatar.png?v=1626656037139" alt="">
            </a>
            <div class="site-title">
                <h1>
                    ZileWang7çš„Blog
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            JAVA+WindowBuilder+MySQLå®ç°é¥­åº—ç®¡ç†ç³»ç»Ÿ
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2021-07-19</time>
                            
                        </div>
                        
                                <div class="post-content">
                                    <p>æœ¬é¡¹ç›®ä¸ºæˆ‘çš„å¤§äºŒè¯¾ç¨‹è®¾è®¡é¡¹ç›®ï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨</p>
<p>ç›® å½•<br>
1	é¡¹ç›®æ¦‚è¿°	1<br>
2	éœ€æ±‚åˆ†æ	2<br>
2.1	æ€»ä½“ç›®æ ‡	2<br>
2.2	å…·ä½“ç›®æ ‡	2<br>
2.3	ç³»ç»ŸåŠŸèƒ½å»ºæ¨¡	2<br>
2.3.1	ç³»ç»Ÿæ•°æ®æµç¨‹å›¾	2<br>
2.3.2	æ•°æ®å­—å…¸	3<br>
2.4	ç³»ç»Ÿæ•°æ®æ¨¡å‹	4<br>
3	æ¦‚è¦è®¾è®¡	6<br>
3.1	ä½“ç³»ç»“æ„è®¾è®¡	6<br>
3.2	æ•°æ®åº“è®¾è®¡	6<br>
3.2.1	å…³ç³»æ¨¡å¼è®¾è®¡	6<br>
3.2.2	ç‰©ç†è¡¨ç»“æ„è®¾è®¡	7<br>
4	è¯¦ç»†è®¾è®¡	10<br>
4.1	ç™»å½•æ¨¡å—	10<br>
4.2	ç‚¹é¤æ¨¡å—	11<br>
5	ç³»ç»Ÿå®ç°	12<br>
5.1	å®ç°æŠ€æœ¯	12<br>
5.2	åº”ç”¨ç¨‹åºé…ç½®	12<br>
5.3	ä¸šåŠ¡é€»è¾‘ä»£ç 	12<br>
5.4	æ•°æ®åº“ä»£ç 	23<br>
6	ç»“æŸè¯­	29<br>
7	å‚è€ƒæ–‡çŒ®	30</p>
<p>1	é¡¹ç›®æ¦‚è¿°<br>
æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé¥­åº—ç®¡ç†ç³»ç»Ÿã€‚<br>
ä¸»è¦å®ç°äº†ç”¨æˆ·çš„ç™»å½•ï¼Œå¼€å°ï¼Œç‚¹é¤ï¼Œç»“ç®—ç­‰åŠŸèƒ½ã€‚<br>
ç®¡ç†ç«¯å®ç°äº†è®¢å•ç®¡ç†ï¼Œé¤å°ç®¡ç†ï¼Œç”¨æˆ·ç®¡ç†å’Œèœå“ç®¡ç†ã€‚<br>
å¯ä»¥åˆ©ç”¨æœ¬ç³»ç»Ÿå¯¹é¤å…ï¼Œé¥­åº—çš„ç‚¹é¤ï¼Œè®¢å•å’Œèœå“è¿›è¡Œç³»ç»Ÿçš„ç®¡ç†ï¼Œæå‡é¥­åº—é¤å…çš„ç®¡ç†æ•ˆç‡ã€‚<br>
ä¸»ç¨‹åºå’ŒGUIï¼šä½¿ç”¨IDEAå¼€å‘çš„JAVAç¨‹åº<br>
æ•°æ®åº“ï¼šä½¿ç”¨Navicatç®¡ç†çš„MySQLæ•°æ®åº“<br>
è¿æ¥ï¼šä½¿ç”¨JDBCé©±åŠ¨è¿›è¡Œæ•°æ®åº“ä¸Javaç¨‹åºè¿æ¥<br>
â€ƒ<br>
2	éœ€æ±‚åˆ†æ<br>
2.1	æ€»ä½“ç›®æ ‡<br>
ç³»ç»Ÿç›®æ ‡ï¼š<br>
1.çª—ä½“ç•Œé¢è®¾è®¡å‹å¥½ã€ç¾è§‚<br>
2.åŸºæœ¬ä¿¡æ¯ç®¡ç†æ–¹ä¾¿ã€å¿«æ·<br>
3.å…·æœ‰è‰¯å¥½çš„æ•°æ®æŸ¥è¯¢åŠŸèƒ½,æ–¹ä¾¿ç®¡ç†å‘˜å’Œç”¨æˆ·çš„æ“ä½œ<br>
4.ç³»ç»Ÿè¿è¡Œç¨³å®šã€ç³»ç»Ÿæ•°æ®å®‰å…¨å¯é <br>
5.æœ€å¤§é™åº¦åœ°å®ç°ç³»ç»Ÿçš„æ˜“ç»´æŠ¤æ€§å’Œæ˜“æ“ä½œæ€§<br>
2.2	å…·ä½“ç›®æ ‡<br>
å…·ä½“ç›®æ ‡ï¼š<br>
1.ç™»å½•ï¼šè¾“å…¥è´¦æˆ·åå’Œå¯†ç ï¼Œè¿›è¡Œç™»å½•ã€‚<br>
2.åŸºæœ¬ä¿¡æ¯ç®¡ç†ï¼šç”¨æˆ·ç®¡ç†,é¤å°ç®¡ç†ï¼Œèœå“åˆ†ç±»ç®¡ç†,èœå“ç®¡ç†ã€‚<br>
3.ç‚¹é¤ç®¡ç†ï¼šç‚¹é¤ï¼ˆå¼€å°ç‚¹é¤ï¼Œç‚¹é¤ä¿¡æ¯å¢åˆ æ”¹æŸ¥ï¼‰<br>
4.ç»“ç®—ç®¡ç†ï¼šç»“ç®—ï¼Œç»“ç®—åé¤å°ç©ºé—²<br>
5.ç»Ÿè®¡æŸ¥è¯¢ï¼šèœå“é”€å”®æŸ¥è¯¢ï¼Œæ”¶å…¥ç»Ÿè®¡<br>
2.3	ç³»ç»ŸåŠŸèƒ½å»ºæ¨¡<br>
2.3.1	ç³»ç»Ÿæ•°æ®æµç¨‹å›¾<br>
è¯¦ç»†æ•°æ®æµå›¾å¦‚å›¾2-1æ‰€ç¤ºã€‚</p>
<p>å›¾ 2 1<br>
æ­¤DFDå›¾æœ‰ä¸¤ä¸ªæ¥å£ï¼Œåˆ†åˆ«æ˜¯ç”¨æˆ·å’Œç®¡ç†å‘˜</p>
<p>ç”¨æˆ·è¾“å‡ºï¼šè®¢åº§ä¿¡æ¯ï¼Œç‚¹é¤ä¿¡æ¯ï¼Œä»˜æ¬¾ä¿¡æ¯<br>
ç®¡ç†å‘˜è¾“å‡ºï¼šç”¨æˆ·ç®¡ç†ä¿¡æ¯ï¼Œèœå“å˜åŠ¨ä¿¡æ¯ï¼Œé¤å°ç®¡ç†ä¿¡æ¯ï¼Œè®¢å•ç®¡ç†ä¿¡æ¯</p>
<p>ç”¨æˆ·æ”¶åˆ°ï¼šé¤å°ä¿¡æ¯ï¼Œèœå“ä¿¡æ¯ï¼Œå‘ç¥¨ä¿¡æ¯ï¼Œç”¨æˆ·çŠ¶æ€ä¿¡æ¯<br>
ç®¡ç†å‘˜æ”¶åˆ°ï¼šé”€å”®æ•°æ®<br>
2.3.2	æ•°æ®å­—å…¸<br>
æ•°æ®å­—å…¸å¦‚å›¾ 2-2æ‰€ç¤ºã€‚</p>
<p>å›¾ 2 2<br>
ä¸»è¦æ•°æ®æœ‰ï¼šç”¨æˆ·ä¿¡æ¯ã€ç®¡ç†å‘˜ä¿¡æ¯ï¼Œèœå“ä¿¡æ¯ï¼Œé¤å°ä¿¡æ¯ï¼Œèœå•ä¿¡æ¯<br>
è¿™äº›æ•°æ®åˆ†åˆ«å­˜å‚¨äºç”¨æˆ·æ•°æ®åº“ã€ç®¡ç†å‘˜æ•°æ®åº“ã€èœå“æ•°æ®åº“ã€é¤å°æ•°æ®åº“ã€èœå•æ•°æ®åº“<br>
2.4	ç³»ç»Ÿæ•°æ®æ¨¡å‹<br>
ç³»ç»Ÿæ•°æ®æ¨¡å‹ï¼Œå³E-Rå›¾ï¼Œå¦‚å›¾ 2-3æ‰€ç¤ºã€‚</p>
<p>å›¾ 2 3<br>
å®ä½“æœ‰ï¼šç”¨æˆ·ï¼Œè®¢å•ï¼Œèœå•ï¼Œèœå“ï¼Œé¤å°ï¼Œç®¡ç†å‘˜<br>
å®ä½“å…³ç³»ï¼š<br>
ç”¨æˆ·-ç‚¹é¤-è®¢å•ï¼šä¸€å¯¹å¤š<br>
è®¢å•-å ç”¨-é¤å°ï¼šä¸€å¯¹ä¸€<br>
è®¢å•-å…³è”-èœå•ï¼šä¸€å¯¹å¤š<br>
èœå•-åŒ…å«-èœå“ï¼šå¤šå¯¹å¤š<br>
ç®¡ç†å‘˜-å¤„ç†-é¤å°/èœå•ï¼šä¸‰å®ä½“å¤šå¯¹å¤š<br>
â€ƒ<br>
3	æ¦‚è¦è®¾è®¡<br>
3.1	ä½“ç³»ç»“æ„è®¾è®¡<br>
ç³»ç»ŸåŠŸèƒ½æ¨¡å—å›¾å¦‚å›¾ 3-1æ‰€ç¤ºã€‚</p>
<p>å›¾ 3 1<br>
é¥­åº—ç®¡ç†ç³»ç»Ÿåˆ†ç”¨æˆ·å’Œç®¡ç†å‘˜ä¸¤ä¸ªæ¨¡å—ã€‚<br>
ç”¨æˆ·æ¨¡å—ä¸­åˆåŒ…å«è®¢åº§ã€ç‚¹é¤ã€ç»“è´¦ä¸‰ä¸ªæ¨¡å—ï¼›<br>
å‰ä¸¤ä¸ªå¯¹åº”äº†é¤å°é€‰æ‹©å’Œèœå“é€‰æ‹©æ¨¡å—ã€‚<br>
ç®¡ç†å‘˜æ¨¡å—ä¸­åŒ…å«ç”¨æˆ·ç®¡ç†ï¼Œèœå“ç®¡ç†å’Œè®¢å•ç®¡ç†æ¨¡å—<br>
åˆ†åˆ«åŒ…å«æ³¨å†Œã€åˆ é™¤ï¼›èœå“ã€åº“å­˜å¢åˆ ï¼›è®¢å•å–æ¶ˆã€åˆ é™¤æ¨¡å—ã€‚<br>
3.2	æ•°æ®åº“è®¾è®¡<br>
3.2.1	å…³ç³»æ¨¡å¼è®¾è®¡<br>
User (UID, UName, Password, Tele, Point)<br>
Admin (AID, AName, Password, Tele)<br>
Order (OID, SID, OMID, Note, Price, isPay)<br>
OrderMenu (OMID, OID, FID)<br>
Seat (SID, Anum,State)<br>
Food (FID, FName, Class, Price, Inventory)<br>
3.2.2	ç‰©ç†è¡¨ç»“æ„è®¾è®¡<br>
ç®¡ç†å‘˜è®¾è®¡å‚æ•°è§è¡¨ 3-1æ‰€ç¤ºã€‚</p>
<p>è¡¨ 3 1 ç®¡ç†å‘˜è¡¨<br>
åˆ—å«ä¹‰	åˆ—æ ‡ç¤º	ç±»å‹	é•¿åº¦	å®Œæ•´æ€§çº¦æŸ<br>
ç®¡ç†å‘˜ID	AID	Int	2	ä¸»é”®<br>
ç®¡ç†å‘˜å	AName	Varchar	20	éç©º<br>
å¯†ç 	Password	Varchar	30	éç©º<br>
ç”µè¯	Tele	Char	11	<br>
ç”¨æˆ·è®¾è®¡å‚æ•°è§è¡¨ 3-2æ‰€ç¤ºã€‚<br>
è¡¨ 3 2 ç”¨æˆ·è¡¨<br>
åˆ—å«ä¹‰	åˆ—æ ‡ç¤º	ç±»å‹	é•¿åº¦	å®Œæ•´æ€§çº¦æŸ<br>
ç”¨æˆ·ID	UID	Int	10	ä¸»é”®<br>
ç”¨æˆ·å	UName	Varchar	20	éç©º<br>
å¯†ç 	Password	Varchar	30	éç©º<br>
ç”µè¯	Tele	Char	11	<br>
ç§¯åˆ†	Point	Int	225	<br>
é¤å°è®¾è®¡å‚æ•°è§è¡¨ 3-3æ‰€ç¤ºã€‚<br>
è¡¨ 3 3 é¤å°è¡¨<br>
åˆ—å«ä¹‰	åˆ—æ ‡ç¤º	ç±»å‹	é•¿åº¦	å®Œæ•´æ€§çº¦æŸ<br>
é¤å°å·	SID	Int	3	ä¸»é”®<br>
åº§ä½æ•°	Anum	Int	2	éç©º<br>
æ˜¯å¦ç©ºé—²	State	Int	1	éç©º<br>
èœå“è®¾è®¡å‚æ•°è§è¡¨ 3-4æ‰€ç¤ºã€‚<br>
è¡¨ 3 4 èœå“è¡¨<br>
åˆ—å«ä¹‰	åˆ—æ ‡ç¤º	ç±»å‹	é•¿åº¦	å®Œæ•´æ€§çº¦æŸ<br>
èœå“ID	FID	Int	4	ä¸»é”®<br>
èœå“å	FName	Varchar	20	éç©º<br>
ç±»åˆ«	Class	Varchar	20	<br>
ä»·æ ¼	Price	Decimal	5-2	<br>
åº“å­˜	Inventory	Int	5	<br>
è®¢å•è®¾è®¡å‚æ•°è§è¡¨ 3-5æ‰€ç¤ºã€‚<br>
è¡¨ 3 5 è®¢å•è¡¨<br>
åˆ—å«ä¹‰	åˆ—æ ‡ç¤º	ç±»å‹	é•¿åº¦	å®Œæ•´æ€§çº¦æŸ<br>
è®¢å•å·	OID	Int	10	ä¸»é”®<br>
å¤‡æ³¨	Note	Varchar	225	<br>
ä»·æ ¼	Price	Decimal	10-2	<br>
ä»˜æ¬¾çŠ¶æ€	isPay	Int	1	éç©º<br>
åº§ä½å·	SID	Int	3	å¤–é”®<br>
èœå•è®¾è®¡å‚æ•°è§è¡¨ 3-6æ‰€ç¤ºã€‚<br>
è¡¨ 3 6 èœå•è¡¨<br>
åˆ—å«ä¹‰	åˆ—æ ‡ç¤º	ç±»å‹	é•¿åº¦	å®Œæ•´æ€§çº¦æŸ<br>
èœå·	OMID	Int	10	ä¸»é”®<br>
è®¢å•å·	OID	Int	10	å¤–é”®<br>
èœå“å·	FID	Int	4	å¤–é”®</p>
<p>4	è¯¦ç»†è®¾è®¡<br>
4.1	ç™»å½•æ¨¡å—<br>
ç™»å½•æ¨¡å—å¦‚å›¾ 4-1æ‰€ç¤ºã€‚</p>
<p>å›¾ 4 1<br>
åœ¨ç™»å½•æ—¶ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç®¡ç†å‘˜ï¼Œè‹¥ä¸ºç®¡ç†å‘˜ï¼Œç›´æ¥è¿›è¡Œç™»å½•éªŒè¯ï¼Œå¦åˆ™è°ƒç”¨ç”¨æˆ·ç®¡ç†ç³»ç»Ÿæ“ä½œã€‚è¾“å…¥è´¦å·å¯†ç æ—¶ï¼Œå…ˆååˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œè´¦å·æ˜¯å¦å­˜åœ¨ï¼Œå¯†ç æ˜¯å¦å¯¹åº”ã€‚å½“éƒ½é€šè¿‡æ—¶ï¼Œç™»å½•æˆåŠŸï¼Œå¦åˆ™é‡æ–°è¾“å…¥ã€‚</p>
<p>4.2	ç‚¹é¤æ¨¡å—<br>
ç‚¹é¤æ¨¡å—å¦‚å›¾ 4-2æ‰€ç¤ºã€‚</p>
<p>å›¾ 4 2<br>
ç‚¹é¤æ—¶ï¼Œå…ˆæŸ¥çœ‹å¹¶é€‰æ‹©æ•°æ®åº“ä¸­çš„èœå“ï¼Œç„¶åå°†èœå“æ·»åŠ åˆ°æ¸…å•ä¸­ï¼Œè¿›è¡Œç¡®è®¤è®¢å•åï¼Œå°†æ¸…å•ä¿¡æ¯æ›´æ–°åˆ°è®¢å•æ•°æ®åº“<br>
â€ƒ<br>
5	ç³»ç»Ÿå®ç°<br>
5.1	å®ç°æŠ€æœ¯<br>
ä½¿ç”¨Ecilpse + WindowBuilderè¿›è¡ŒGUIå’ŒJAVAç¨‹åºçš„å¼€å‘<br>
ä½¿ç”¨Navicatå¯¹MYSQLæ•°æ®åº“è¿›è¡Œç®¡ç†<br>
5.2	åº”ç”¨ç¨‹åºé…ç½®<br>
JAVASE 1.7çš„å¼€å‘åŠè¿è¡Œç¯å¢ƒ<br>
MYSQLæ•°æ®åº“ç‰ˆæœ¬ä¸º5.7.33<br>
5.1.47çš„JDBCé©±åŠ¨è¿›è¡ŒJAVAç¨‹åºå’Œæ•°æ®åº“çš„è¿æ¥<br>
5.3	ä¸šåŠ¡é€»è¾‘ä»£ç <br>
Hms.model:</p>
<p>LoginContrl.Java<br>
//ç™»å½•æ§åˆ¶</p>
<p>package hms.model;<br>
import java.sql.*;<br>
import hms.util.DBUtil;</p>
<p>public class LoginControl {<br>
public static boolean isAdmin;<br>
public static int id;</p>
<p>//éªŒè¯å¯†ç <br>
public static boolean LoginCheck(boolean isAdmin, int id, String password) throws ClassNotFoundException, SQLException {<br>
String SQL = &quot;SELECT password FROM &quot;;<br>
if (!isAdmin) {<br>
SQL = SQL + &quot;<code>user</code> where uid = &quot; + id;<br>
} else {<br>
isAdmin = true;<br>
SQL = SQL + &quot;<code>admin</code> where aid =  &quot; + id;<br>
}<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
if (!resultSet.next()) {<br>
try {<br>
DBUtil.closeConnection();<br>
} catch (Exception e) {<br>
e.printStackTrace();<br>
}<br>
return false;<br>
} else if (!resultSet.getObject(&quot;password&quot;).equals(password)) {<br>
try {<br>
DBUtil.closeConnection();<br>
} catch (Exception e) {<br>
e.printStackTrace();<br>
}<br>
return false;<br>
}<br>
try {<br>
DBUtil.closeConnection();<br>
} catch (Exception e) {<br>
e.printStackTrace();<br>
}<br>
LoginControl.id = id;<br>
try {<br>
ReadInformation();<br>
} catch (Exception e) {<br>
e.printStackTrace();<br>
}<br>
System.out.println(&quot;\nSucesss!\nisAdmin:&quot; + isAdmin + &quot;\nid:&quot; + LoginControl.id);<br>
return true;<br>
}</p>
<p>//ä¿¡æ¯è¯»å…¥<br>
public static void ReadInformation() throws Exception {<br>
if (isAdmin) {</p>
<pre><code>	} else {
		User.userInformationRead(id);
	}
}
</code></pre>
<p>}</p>
<p>Seat.Java<br>
//é¤å°ç®¡ç†</p>
<p>package hms.model;<br>
import java.sql.*;<br>
import hms.util.DBUtil;</p>
<p>public class Seat {<br>
public static int[] SID = new int[100];<br>
public static int[] Anum = new int[100];<br>
public static int[] State = new int[100];<br>
public static int USID;<br>
public static int UAnum;</p>
<p>//åº§ä½è·å–<br>
public static void getSeats() throws Exception {<br>
String SQL = &quot;SELECT * FROM seat&quot;;<br>
ResultSet resultSet = DBUtil.query(SQL);</p>
<pre><code>	for (int i = 1; resultSet.next(); i++) {
		SID[i] = resultSet.getInt(&quot;SID&quot;);
		Anum[i] = resultSet.getInt(&quot;Anum&quot;);
		State[i] = resultSet.getInt(&quot;State&quot;);
	}
	DBUtil.closeConnection();
}
</code></pre>
<p>//å‰©ä½™åº§ä½é‡è·å–<br>
public static int remainingSeats(int Anum) throws Exception {<br>
int num = 0;<br>
String SQL = &quot;SELECT * FROM seat where Anum =&quot;;<br>
SQL = SQL + &quot; &quot; + Anum;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
while (resultSet.next()) {<br>
if(resultSet.getInt(&quot;State&quot;) == 0) {<br>
num++;<br>
}<br>
}<br>
DBUtil.closeConnection();<br>
return num;<br>
}</p>
<pre><code>//ç¡®è®¤åº§ä½
public static boolean SeatConfirm() throws Exception {
	String SQL = &quot;SELECT * FROM seat WHERE Anum = &quot;;
	SQL = SQL + UAnum + &quot; AND State = 0&quot;;
	ResultSet resultSet = DBUtil.query(SQL);
	resultSet.next();
	try {
		USID = resultSet.getInt(&quot;SID&quot;);
	} catch (Exception e) {
		return false;
	}
	String SQL2 = &quot;UPDATE seat SET State = 1 WHERE SID = &quot;;
	SQL2 = SQL2 + USID;
	DBUtil.update(SQL2);
	DBUtil.closeConnection();
	return true;
}
</code></pre>
<p>//åº§ä½çŠ¶æ€æ›´æ”¹<br>
public static void StateChange(int State,int SID) throws Exception {<br>
String SQL = &quot;UPDATE seat SET State = &quot;;<br>
SQL = SQL + State +&quot; WHERE SID = &quot;+ SID;<br>
DBUtil.update(SQL);<br>
DBUtil.closeConnection();<br>
}<br>
}</p>
<p>Food.Java<br>
//èœå“ç®¡ç†</p>
<p>package hms.model;<br>
import java.sql.ResultSet;<br>
import javax.swing.ImageIcon;<br>
import hms.util.DBUtil;<br>
import hms.view.OrderFrame;</p>
<p>public class Food {<br>
//èœåè·å–<br>
public static String[] getFoodsName(String Class) throws Exception {<br>
String[] list = new String[20];<br>
String SQL = &quot;SELECT FName FROM Food WHERE Class like '&quot;;<br>
SQL = SQL + Class +&quot;'&quot;;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
for (int i = 0; resultSet.next(); i++) {<br>
list[i] = resultSet.getString(&quot;FName&quot;);<br>
}<br>
DBUtil.closeConnection();<br>
return list;<br>
}</p>
<p>//èœå“å›¾ç‰‡è¯»å…¥<br>
public static ImageIcon getIcon(int FID) {<br>
try {<br>
ImageIcon testtt = new ImageIcon(OrderFrame.class.getResource(&quot;/img/&quot; + FID + &quot;.jpg&quot;));<br>
} catch (Exception e) {<br>
return null;<br>
}<br>
ImageIcon icon = new ImageIcon(OrderFrame.class.getResource(&quot;/img/&quot; + FID + &quot;.jpg&quot;));<br>
return icon;<br>
}</p>
<pre><code>public static int CFid = 1;
public static String CFName = &quot;çº¢çƒ§è‚‰&quot;;
public static float CFPrice = (float) 18.00;
public static int CFInventory = 35;
public static int allPrice = 0;
</code></pre>
<p>//èœå“é€‰æ‹©<br>
public static void foodChoose(String FName) throws Exception {<br>
String SQL = &quot;SELECT * FROM Food WHERE FName like '&quot;;<br>
SQL = SQL + FName +&quot;'&quot;;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
while (resultSet.next()) {<br>
CFid = resultSet.getInt(&quot;FID&quot;);<br>
CFName = resultSet.getString(&quot;FName&quot;);<br>
CFPrice = resultSet.getInt(&quot;Price&quot;);<br>
CFInventory = resultSet.getInt(&quot;Inventory&quot;);<br>
}<br>
DBUtil.closeConnection();<br>
}</p>
<pre><code>public static String[] orderStrings = new String[20];
public static int listNum = 0;
</code></pre>
<p>//èœå•æ·»åŠ èœå“<br>
public static void addFood() {<br>
orderStrings[listNum] = CFName;<br>
listNum++;<br>
allPrice += CFPrice;<br>
}<br>
}</p>
<p>Order.Java<br>
//è®¢å•ç®¡ç†</p>
<p>package hms.model;<br>
import java.sql.ResultSet;<br>
import hms.util.DBUtil;</p>
<p>public class Order {<br>
public static int OID;<br>
//åˆ›å»ºè®¢å•<br>
public static void creatOrder() throws Exception {<br>
int lastOID = 0;<br>
String SQL = &quot;SELECT OID FROM <code>order</code> ORDER BY OID&quot;;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
while (resultSet.next()) {<br>
lastOID = resultSet.getInt(1);<br>
}<br>
DBUtil.closeConnection();<br>
System.out.println(lastOID);<br>
OID = lastOID + 1;<br>
String SQL2 = &quot;INSERT INTO <code>order</code> (OID,isPay,SID) VALUES ('&quot;;<br>
SQL2 = SQL2 + OID + &quot;','0','&quot; + Seat.USID + &quot;')&quot;;<br>
DBUtil.update(SQL2);<br>
DBUtil.closeConnection();<br>
}</p>
<pre><code>public static int OMID;
</code></pre>
<p>//ä¸Šä¼ è®¢å•å’Œèœå•<br>
public static void updateOrder() throws Exception {<br>
int lastOMID = 0;<br>
String SQL = &quot;SELECT OMID FROM <code>ordermenu</code> ORDER BY OMID&quot;;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
while (resultSet.next()) {<br>
lastOMID = resultSet.getInt(1);<br>
}<br>
DBUtil.closeConnection();<br>
System.out.println(lastOMID);<br>
OMID = lastOMID + 1;<br>
for (int i = 0; Food.orderStrings[i] != null; i++) {<br>
int FID = 0;<br>
String SQL3 = &quot;SELECT FID FROM Food WHERE FName like '&quot;;<br>
SQL3 = SQL3 + Food.orderStrings[i] + &quot;'&quot;;<br>
ResultSet resultSet2 = DBUtil.query(SQL3);<br>
while (resultSet2.next()) {<br>
FID = resultSet2.getInt(&quot;FID&quot;);<br>
}<br>
String SQL2 = &quot;INSERT INTO <code>ordermenu</code> (OMID,FID,OID) VALUES ('&quot;;<br>
SQL2 = SQL2 + OMID + &quot;','&quot; + FID + &quot;','&quot; + OID + &quot;')&quot;;<br>
DBUtil.update(SQL2);<br>
OMID++;<br>
DBUtil.closeConnection();<br>
}<br>
String SQL4 = &quot;UPDATE <code>order</code> SET Price =&quot;;<br>
SQL4 = SQL4 + Food.allPrice + &quot; WHERE OID = &quot; + OID;<br>
DBUtil.update(SQL4);<br>
DBUtil.closeConnection();<br>
}</p>
<p>//ç»“ç®—å¤„ç†<br>
public static void payDeal() throws Exception {<br>
String SQL = &quot;UPDATE <code>order</code> SET isPay = 1 WHERE OID = &quot;;<br>
SQL = SQL + OID;<br>
DBUtil.update(SQL);<br>
DBUtil.closeConnection();<br>
String SQL2 = &quot;UPDATE <code>user</code> SET Point = Point + &quot;;<br>
SQL2 = SQL2 + Food.allPrice + &quot; WHERE UID = &quot; + User.UID;<br>
DBUtil.update(SQL2);<br>
DBUtil.closeConnection();<br>
}</p>
<p>//æ ¹æ®è®¢å•å·è·å–åº§ä½å·<br>
public static int getSID(int OID) throws Exception {<br>
int SID = 0;<br>
String SQL = &quot;SELECT SID FROM <code>order</code> where OID = &quot;;<br>
SQL = SQL + OID;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
while (resultSet.next()) {<br>
SID = resultSet.getInt(1);<br>
}<br>
return SID;<br>
}</p>
<p>//è®¢å•åˆ é™¤<br>
public static void OrderDelet(int OID) throws Exception {<br>
String SQL = &quot;DELETE FROM <code>order</code> WHERE OID = &quot;;<br>
SQL = SQL + OID;<br>
DBUtil.update(SQL);<br>
DBUtil.closeConnection();<br>
}</p>
<p>//è·å–æ€»è¥ä¸šé¢<br>
public static float getTotalTurnover() throws Exception {<br>
float TotalTurnover = 0;<br>
String SQL = &quot;SELECT Price From <code>order</code>&quot;;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
while (resultSet.next()) {<br>
TotalTurnover += resultSet.getFloat(1);<br>
}<br>
return TotalTurnover;<br>
}</p>
<p>//è·å–æ€»é”€é‡<br>
public static int getTotalSales() throws Exception {<br>
int TotalSales = 0;<br>
String SQL = &quot;SELECT OMID From <code>ordermenu</code>&quot;;<br>
ResultSet resultSet = DBUtil.query(SQL);<br>
while (resultSet.next()) {<br>
TotalSales++;<br>
}<br>
return TotalSales;<br>
}<br>
}<br>
5.4	æ•°æ®åº“ä»£ç <br>
Hms.util<br>
DBUtil.Java<br>
//æ•°æ®åº“è¿æ¥ä¸æ“ä½œçš„æŠ½è±¡<br>
package hms.util;<br>
import java.sql.*;</p>
<p>public class DBUtil {<br>
public static final String DBDRIVER = &quot;com.mysql.jdbc.Driver&quot;;<br>
public static final String DBURL = &quot;jdbc:mysql://localhost:3306/resmsc?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&quot;;<br>
public static final String DBUSER = &quot;LNTU_DDC&quot;;<br>
public static final String DBPASS = &quot;jtcsm&quot;;<br>
public static Connection connection = null;</p>
<p>//è·å–å¹¶è¿”å›è¿æ¥<br>
public static Connection getConnection() throws ClassNotFoundException, SQLException {<br>
Connection con = null;<br>
try {<br>
Class.forName(DBDRIVER);<br>
} catch (ClassNotFoundException e) {<br>
e.printStackTrace();<br>
}<br>
try {<br>
con = DriverManager.getConnection(DBURL, DBUSER, DBPASS);<br>
} catch (SQLException e) {<br>
e.printStackTrace();<br>
}<br>
System.out.println(&quot;connect to db&quot;);<br>
return con;<br>
}</p>
<p>//æ•°æ®åº“æŸ¥æ‰¾<br>
public static ResultSet query(String sql) throws ClassNotFoundException, SQLException {<br>
connection = getConnection();<br>
Statement statement = connection.createStatement();<br>
ResultSet resultSet = statement.executeQuery(sql);<br>
return resultSet;<br>
}</p>
<p>//æ•°æ®åº“æ›´æ–°<br>
public static int update(String sql) throws ClassNotFoundException, SQLException {<br>
connection = getConnection();<br>
Statement statement = connection.createStatement();<br>
int UpdateLine = statement.executeUpdate(sql);<br>
return UpdateLine;<br>
}</p>
<p>//å…³é—­è¿æ¥<br>
public static void closeConnection() throws Exception {<br>
connection.close();<br>
}<br>
}</p>
<p>SQLå»ºè¡¨è¯­å¥<br>
Admin<br>
DROP TABLE IF EXISTS <code>admin</code>;<br>
CREATE TABLE <code>admin</code>  (<br>
<code>AID</code> int(2) NOT NULL,<br>
<code>AName</code> varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,<br>
<code>Password</code> varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,<br>
<code>Tele</code> char(11) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,<br>
PRIMARY KEY (<code>AID</code>) USING BTREE<br>
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;</p>
<p>SET FOREIGN_KEY_CHECKS = 1;</p>
<p>Food<br>
DROP TABLE IF EXISTS <code>food</code>;<br>
CREATE TABLE <code>food</code>  (<br>
<code>FID</code> int(4) NOT NULL,<br>
<code>FName</code> varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,<br>
<code>Class</code> varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,<br>
<code>Price</code> decimal(5, 2) NULL DEFAULT NULL,<br>
<code>Inventory</code> int(5) NULL DEFAULT NULL,<br>
PRIMARY KEY (<code>FID</code>) USING BTREE<br>
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;</p>
<p>SET FOREIGN_KEY_CHECKS = 1;</p>
<p>Order<br>
DROP TABLE IF EXISTS <code>order</code>;<br>
CREATE TABLE <code>order</code>  (<br>
<code>OID</code> int(10) NOT NULL,<br>
<code>Note</code> varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,<br>
<code>Price</code> decimal(10, 2) NULL DEFAULT NULL,<br>
<code>isPay</code> int(1) NOT NULL,<br>
<code>SID</code> int(3) NULL DEFAULT NULL,<br>
PRIMARY KEY (<code>OID</code>) USING BTREE,<br>
INDEX <code>SID</code>(<code>SID</code>) USING BTREE,<br>
CONSTRAINT <code>SID</code> FOREIGN KEY (<code>SID</code>) REFERENCES <code>seat</code> (<code>SID</code>) ON DELETE SET NULL ON UPDATE RESTRICT<br>
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;</p>
<p>SET FOREIGN_KEY_CHECKS = 1;</p>
<p>Ordermenu<br>
DROP TABLE IF EXISTS <code>ordermenu</code>;<br>
CREATE TABLE <code>ordermenu</code>  (<br>
<code>OMID</code> int(10) NOT NULL,<br>
<code>FID</code> int(4) NULL DEFAULT NULL,<br>
<code>OID</code> int(10) NULL DEFAULT NULL,<br>
PRIMARY KEY (<code>OMID</code>) USING BTREE,<br>
INDEX <code>FID</code>(<code>FID</code>) USING BTREE,<br>
INDEX <code>OID</code>(<code>OID</code>) USING BTREE,<br>
CONSTRAINT <code>FID</code> FOREIGN KEY (<code>FID</code>) REFERENCES <code>food</code> (<code>FID</code>) ON DELETE SET NULL ON UPDATE RESTRICT,<br>
CONSTRAINT <code>OID</code> FOREIGN KEY (<code>OID</code>) REFERENCES <code>order</code> (<code>OID</code>) ON DELETE SET NULL ON UPDATE RESTRICT<br>
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;</p>
<p>SET FOREIGN_KEY_CHECKS = 1;</p>
<p>Seat<br>
DROP TABLE IF EXISTS <code>seat</code>;<br>
CREATE TABLE <code>seat</code>  (<br>
<code>SID</code> int(3) NOT NULL,<br>
<code>Anum</code> int(2) NOT NULL,<br>
<code>State</code> int(1) NOT NULL,<br>
PRIMARY KEY (<code>SID</code>) USING BTREE<br>
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;</p>
<p>SET FOREIGN_KEY_CHECKS = 1;</p>
<p>User<br>
DROP TABLE IF EXISTS <code>user</code>;<br>
CREATE TABLE <code>user</code>  (<br>
<code>UID</code> int(10) NOT NULL,<br>
<code>UName</code> varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,<br>
<code>Password</code> varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,<br>
<code>Tele</code> char(11) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,<br>
<code>Point</code> int(20) UNSIGNED NULL DEFAULT NULL,<br>
PRIMARY KEY (<code>UID</code>) USING BTREE<br>
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;</p>
<p>SET FOREIGN_KEY_CHECKS = 1;<br>
â€ƒ<br>
6	ç»“æŸè¯­<br>
æ­¤æ¬¡å¼€å‘ä½¿æˆ‘èƒ½å¤Ÿç†Ÿç»ƒçš„ä½¿ç”¨WindowBuilderè¿›è¡ŒGUIçª—å£è®¾è®¡ï¼Œèƒ½å¤Ÿç†Ÿç»ƒçš„ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³è¿›è¡ŒJavaç¨‹åºçš„å¼€å‘ï¼Œå¹¶ä¸”å­¦ä¼šäº†JDBCèƒ½å¤Ÿä½¿ç”¨JAVAç¨‹åºå¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œè¿˜åŠ å¼ºäº†å¯¹SQLè¯­å¥çš„ç†Ÿç»ƒç¨‹åº¦ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œã€‚<br>
æˆ‘æ‰€å¼€å‘çš„é¥­åº—ç®¡ç†ç³»ç»Ÿä»¥å¯¹ç”¨æˆ·ç«¯çš„ä½“éªŒä¸ºå¼€å‘æ–¹å‘ç€é‡å¼€å‘ï¼Œå½“ç”¨æˆ·è¿›è¡Œç‚¹é¤æ—¶ï¼Œä»…ä»…è¿›è¡Œå•å‡»æ“ä½œå°±å¯ä»¥å®Œæ•´çš„è¿›è¡Œé€‰åº§ï¼Œé€‰é¤ï¼Œæ”¯ä»˜è¿™ä¸€æ•´å¥—å°±é¤æ­¥éª¤ï¼Œæå¤§çš„æå‡äº†ç”¨æˆ·ä½“éªŒï¼›ä½†ç”±äºæ—¶é—´å…³ç³»åœ¨ç®¡ç†ç«¯è¿˜å­˜åœ¨æœªå¼€å‘å®Œæ¯•çš„åŠŸèƒ½ï¼Œåœ¨æ—¶é—´å……æ²›çš„æƒ…å†µä¸‹æˆ‘ä¼šè¿›è¡Œæ”¹è¿›ï¼Œå¹¶ä¸”ä»¥åæé«˜è‡ªå·±çš„å¼€å‘é€Ÿåº¦ä»¥é¿å…å†æ¬¡å‡ºç°è¿™ç§æƒ…å†µã€‚<br>
â€ƒ<br>
7	å‚è€ƒæ–‡çŒ®<br>
[1]å¼ æµ·è—©,ç‰Ÿæ°¸æ•.  è½¯ä»¶å·¥ç¨‹å¯¼è®º[M] .åŒ—äº¬.æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾. 2013(06)<br>
[2]è€¿ç¥¥ä¹‰,å¼ è·ƒå¹³.  Javaç¨‹åºè®¾è®¡ç²¾ç¼–æ•™ç¨‹[M] .åŒ—äº¬.æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾. 2017(03)<br>
[3]ç‹çŠ,è¨å¸ˆç…Š.  æ•°æ®åº“ç³»ç»Ÿæ¦‚è®º[M].åŒ—äº¬.é«˜ç­‰æ•™è‚²å‡ºç‰ˆç¤¾. 2014(05)<br>
[4] å¼ è‹±,æœç‚œ.  JDBCæ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ç®€ä»‹åŠè®¾è®¡[J]. ç”µè„‘çŸ¥è¯†ä¸æŠ€æœ¯. 2010 (08)<br>
[6] èµµæµ·é¾™,æˆ´ç‰åˆš.  JDBCé©±åŠ¨ç¨‹åºåŠå…¶é€‰æ‹©åˆ†æ[J]. ç¦å»ºç”µè„‘. 2008 (02)<br>
[7] ç½—è£,å”å­¦å…µ.  åŸºäºJDBCçš„æ•°æ®åº“è¿æ¥æ± çš„è®¾è®¡ä¸å®ç°[J]. è®¡ç®—æœºå·¥ç¨‹. 2004 (09)<br>
[8] ä½•æ˜,æˆ´é’¢,è‘›æ­£ä¹‰.  åŸºäºJDBCè¯­å¥åˆ†äº«çš„æ•°æ®åº“è¿æ¥æ± [J]. é“è·¯è®¡ç®—æœºåº”ç”¨. 2002 (11)<br>
[9] å¼ å»·ç‰,çŸ³ä¼Ÿä¼Ÿ.  åŸºäºJDBCçš„WebGISå¼‚æ„æ•°æ®åº“å­˜å–æŠ€æœ¯[J]. æµ‹ç»˜é€šæŠ¥. 2000 (01)<br>
[10] è°¢äººå¼º.  é€‰ç”¨åˆé€‚çš„JDBCé©±åŠ¨ç¨‹åº[J]. ç”µè„‘çŸ¥è¯†ä¸æŠ€æœ¯(å­¦æœ¯äº¤æµ). 2007 (02)<br>
[11] å­™å›½å¿—.  é¢å‘è½¯ä»¶å·¥ç¨‹çš„å·¥ä½œæµç®¡ç†ç³»ç»Ÿç ”ç©¶[J]. ä¼ä¸šæŠ€æœ¯å¼€å‘. 2014 (11)</p>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">ä¸‹ä¸€ç¯‡</div>
                            <a href="https://zilewang7.github.io/post/zai-deepin-zhong-shi-yong-codeblocks/">
                                <h3 class="post-title">
                                    åœ¨deepinä¸­ä½¿ç”¨code::blocks
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                                <!-- id-card -->
                                
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://zilewang7.github.io/images/avatar.png?v=1626656037139)">
        </div>
        <h1 class="id_card-title">
            ZileWang7çš„Blog
        </h1>
        <h2 class="id_card-description">
            ç­‰ğŸ“å•„å®Œäº†ğŸšï¼ŒğŸ•èˆ”å®Œäº†ğŸœï¼ŒğŸ”¥çƒ§æ–­äº†ğŸ”’
Bolgå°±ä¸ğŸ•Šäº†
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    
                                    

                </div>




            </div>


            <div class="site-footer">
   | 
  <a class="rss" href="https://zilewang7.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>